# Archib
The purpose of this repo is to provide a DB structure and insert management tools for large-scale archival of programs and media.  
"Large-scale" in a local sense of course. I don't have petabytes of data to test with, so I can only guarantee this works smoothly with data scales up to around 50TB.

## Purpose
**Archib** is a (very) shortened portmanteau of *archive* and *backup*. With the amount of hoarded data I have, storing all of on the machines I use daily starts making file management quite a pain. The *archive* component serves to organize and "tag" all significant groupings of files and data in such a way as to make them easily searchable and retrievable from any web-accessible location.  
The *backup* component is almost more of a side-effect, but by centralizing the storage location of all useful data, this simplifies the process of using a tool like `rsync` to ensure an actual backup of the data on a separate disk or in a separate location.

### Why not use an online service?
Based on my calculations (that I made about 3 years ago now, granted), the average cost of live data storage in existing cloud-based services is roughly equivalent to needing to buy new hard drives every two years. While local hard drives do eventually need to be replaced, they definitely last longer than two years on average, especially when they aren't constantly being re/over-written.  
And of course for privacy reasons.

### This doesn't seem to be based on a NAS structure?
Why am I asking myself questions?  
Well, the easy answer is that it doesn't really matter. Drives that store `archib` data could be mounted to a NAS is desired, but that's generally not the case. Certain archive types (see DB schema in section below) already contain "live media", which are tagged as uncompressed, and which generally represent media that is already exposed to end usage via another service. In my case for example, I have a [Jellyfin](https://jellyfin.org/) server that I use to expose Audio, Video and Image based media that I have any reason to keep accessible. For things that have executables, its actually usually not desireable to have these be launched from a NAS structure, particularly when the data is supposed to represent an archive. Things like inis, save files, config files, and more are often generated, which arbitrarily changes the file structure of the application, as well as prevent different potential users from having different configs, unless the application is specifically build to support that.  
There's a lot of words here to essentially say `NAS == Shared Live Data =/= Archive == Data Storage`.

### Functional Range
Current validated:  ~10TB  
Expected:           ~50TB
Goal:               ~100TB

## Use
The `sql` file found under `shell/createdb.sql` provides the SQL schema for the archival database. There are six tables breaking down all different files and media into the following categories:
- Audio
- Books
- Games
- ImageSet
- Software
- Videos

Following is a breakdown of the schema and field definition.

### Audio
Audio represents any **purely** auditory-based media.
|Field Name|Definition|Type|
|:---:|:---:|:---:|
|uid|Unique ID generated by PSQL. Useful for searching|INT|
|displayname|Name that should be used for serching. Generally pretty close to "title"|TEXT|
|audiotype|Audio is divided into four types: ASMR, Audiobook, Audio Roleplay, Music.|TYPE|
|artist| aka Musician, Performer, etc. The person or studio that produced this audio.|TEXT|
|title|Official title of the work(s)|TEXT|
|publisher|Music Label, really, though sometimes other forms of audio have publishers.|TEXT|
|id|Commonly called "Platform ID". When certain works are purchased on certain platforms, those works have IDs on those platforms for easy identification. Very useful for searching.|TEXT|
|drm|This represents the Storefront the item was purchased on. Yes, it's very poorly named.|TEXT|
|url|URL to the location you can purchase or review the item.|TEXT|
|notes|For miscellaneous notes|TEXT|
|adult|If this work strictly 18+.|BOOLEAN|
|livemedia|This work(s) can be viewed though some live service (i.e. it's on Jellyfin).|BOOLEAN|
|filepath|Local archival file location.|TEXT|
|archtype|Table name. I forget why.|TYPE|

### Books
Books represent text works that may or may not be illustrated, conveying information, usually a story of some kind.
|Field Name|Definition|Type|
|:---:|:---:|:---:|
|uid|Unique ID generated by PSQL. Useful for searching|INT|
|displayname|Name that should be used for serching. Generally pretty close to "title"|TEXT|
|booktype|Books are divided into six types: Artbook, Comic, Doujinshi, Manga, Novel, Magazine|TYPE|
|author| Person who wrote the book.|TEXT|
|illus| Person who illustrated the work.|TEXT|
|title|Official title of the work.|TEXT|
|genre|List of tags relevent to this title. Useful for searching.|TEXT[]|
|year|Release year of the work.|INT|
|id|Commonly called "Platform ID". When certain works are purchased on certain platforms, those works have IDs on those platforms for easy identification. Very useful for searching.|TEXT|
|notes|For miscellaneous notes|TEXT|
|adult|If this work strictly 18+.|BOOLEAN|
|livemedia|This work(s) can be viewed though some live service (i.e. it's on Jellyfin).|BOOLEAN|
|filepath|Local archival file location.|TEXT|
|archtype|Table name. I forget why.|TYPE|

### Games
Games represent video games. Defining this seems like inviting trouble, but the *general* rule is "executable applications meant for entertainment".  
I know I had figured out how to represent backed up mods here, but I can't remember what I decided on. TODO.
|Field Name|Definition|Type|
|:---:|:---:|:---:|
|uid|Unique ID generated by PSQL. Useful for searching|INT|
|displayname|Name that should be used for serching. Generally pretty close to "title"|TEXT|
|platform|Platform on which the game can be played.|TEXT|
|developer|Primary developer (or company) responsible for this game.|TEXT|
|publisher|The game's publisher.|TEXT|
|title|Official title of the work.|TEXT|
|genre|List of tags relevent to this title. Useful for searching.|TEXT[]|
|year|Release year of the work.|INT|
|dlc|List of any DLC included in this package.|TEXT[]|
|id|Commonly called "Platform ID". When certain works are purchased on certain platforms, those works have IDs on those platforms for easy identification. Very useful for searching.|TEXT|
|drm|This represents the Storefront the item was purchased on. Yes, it's very poorly named.|TEXT|
|url|URL to the location you can purchase or review the item.|TEXT|
|mod|I forget|TEXT|
|gamever|The game's version.|TEXT|
|notes|For miscellaneous notes|TEXT|
|adult|If this work strictly 18+.|BOOLEAN|
|filepath|Local archival file location.|TEXT|
|archtype|Table name. I forget why.|TYPE|

### ImageSet
ImageSets are collections of images *without text* that usually follow a specific pattern, but do not intend to tell a story or convery a message. This is primarily collections of artwork.
|Field Name|Definition|Type|
|:---:|:---:|:---:|
|uid|Unique ID generated by PSQL. Useful for searching|INT|
|displayname|Name that should be used for serching. Generally pretty close to "title"|TEXT|
|imagetpe|ImageSets are divided into three types: 2D, CG, and Photo.|TYPE|
|artist| Illustrator, Modeler or Model, whichever represents the type the best.|TEXT|
|title|Official title of the work(s)|TEXT|
|filetype|Types of file found in package.|TEXT|
|notes|For miscellaneous notes|TEXT|
|adult|If this work strictly 18+.|BOOLEAN|
|livemedia|This work(s) can be viewed though some live service (i.e. it's on Jellyfin).|BOOLEAN|
|filepath|Local archival file location.|TEXT|
|archtype|Table name. I forget why.|TYPE|

### Software
Software is a very generic term to catch any types of executables or code that do not have the primary purpose of entertainment. 
|Field Name|Definition|Type|
|:---:|:---:|:---:|
|uid|Unique ID generated by PSQL. Useful for searching|INT|
|displayname|Name that should be used for serching. Generally pretty close to "title"|TEXT|
|softtype|Software is divided into three types: DCC, Driver, and Reader. These are very generic, so it's not always the most useful TBH.|TYPE|
|developer|Primary developer (or company) responsible for this game.|TEXT|
|title|Official title of the work.|TEXT|
|format|The file or media format this piece of software interacts with.|TEXT[]|
|drm|This represents the Storefront the item was purchased on. Yes, it's very poorly named.|TEXT|
|url|URL to the location you can purchase or review the item.|TEXT|
|version|The version of the software.|TEXT|
|notes|For miscellaneous notes|TEXT|
|filepath|Local archival file location.|TEXT|
|archtype|Table name. I forget why.|TYPE|

### Videos
It feels silly to define this, but let's say "file or collection of files containing cinematic content without significant interactive components and requiring a third party application to read".
|Field Name|Definition|Type|
|:---:|:---:|:---:|
|uid|Unique ID generated by PSQL. Useful for searching|INT|
|displayname|Name that should be used for serching. Generally pretty close to "title"|TEXT|
|videostyle|Videos are divided into four styles: Anime, Cartoon, CG, Live-Action.|TYPE|
|videotype|Videos are divided into two types: Feature, and Series.|TYPE|
|studio|Primary studio responsible for publishing this video.|TEXT|
|title|Official title of the work.|TEXT|
|genre|List of tags relevent to this title. Useful for searching.|TEXT[]|
|year|Release year of the work.|INT|
|id|Commonly called "Platform ID". When certain works are purchased on certain platforms, those works have IDs on those platforms for easy identification. Very useful for searching.|TEXT|
|url|URL to the location you can purchase or review the item.|TEXT|
|notes|For miscellaneous notes|TEXT|
|vr|If this video is meant for VR/180/360 viewing.|BOOLEAN|
|adult|If this work strictly 18+.|BOOLEAN|
|livemedia|This work(s) can be viewed though some live service (i.e. it's on Jellyfin).|BOOLEAN|
|filepath|Local archival file location.|TEXT|
|archtype|Table name. I forget why.|TYPE|


## Archive.py
TODO
